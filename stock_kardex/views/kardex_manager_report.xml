<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
<template id="report_kardex_footnote_sup">
    <t t-if="column in a['footnotes']">
        <sup t-if="mode != 'print'">
            <b class="o_account_reports_footnote_sup"><a t-att-href="'#footnote' + str(a['footnotes'][column])"><t t-esc="a['footnotes'][column]"/></a></b>
        </sup>
        <sup t-if="mode == 'print'">
            <t t-esc="a['footnotes'][column]"/>
        </sup>
    </t>
</template>

<template id="report_kardex_stock_line">
    <t t-set="trclass" t-value="''"/>
    <t t-if="a['type'] in ['line', 'total']"><t t-set="trclass" t-value="'o_account_reports_default_style'"/></t>
    <t t-if="a.get('level') == 1 and a['type'] in ['line', 'total']"><t t-set="trclass" t-value="'o_account_reports_level1'"/></t>
    <t t-if="a.get('level') == 2 and a['type'] in ['line', 'total']"><t t-set="trclass" t-value="'o_account_reports_level2'"/></t>
    <t t-set="domainClass" t-value="'o_account_reports_domain_line_2'"/>
    <t t-set="column" t-value="0"/>
    <tr t-att-data-type="a['type']" t-att-data-id="a['id']" t-att-class="trclass + ' ' + a['type'] + ' ' + ((a.get('unfoldable') and a.get('unfolded')) and 'o_account_reports_unfolded' or '')">
        <t t-set="tdclass" t-value="''" />
        <t t-if="a.get('unfoldable') and a.get('unfolded')"><t t-set="tdclass" t-value="'o_account_reports_foldable'" /></t>
        <t t-if="a.get('unfoldable') and not a.get('unfolded')"><t t-set="tdclass" t-value="'o_account_reports_unfoldable'" /></t>
        <td t-att-data-id="a.get('id')" t-att-class="tdclass" t-att-colspan="a.get('colspan', 1)">
            <t t-if="mode != 'print'">
                <t t-if="a.get('unfoldable') and a.get('unfolded')">
                    <span t-att-data-id="a['id']" t-att-class="' '.join(['o_account_reports_foldable', 'o_account_reports_caret_icon'])"><i class="fa fa-fw fa-caret-down"></i></span>
                </t>
                <t t-if="a.get('unfoldable') and not a.get('unfolded')">
                    <span t-att-data-id="a['id']" t-att-class="' '.join(['o_account_reports_unfoldable', 'o_account_reports_caret_icon'])"><i class="fa fa-fw fa-caret-right"></i></span>
                </t>
            </t>
            <t t-if="mode == 'print' and a['type'] not in ['line']">
                <span t-att-data-id="a.get('id')" t-att-class="a.get('type') + ' ' + domainClass">
                    <strong><t t-esc="a.get('name')"/></strong>
                </span>
                <t t-call="stock_kardex.report_kardex_footnote_sup" />
            </t>
            <t t-if="a['type'] not in ['line'] and mode != 'print'">
                <span t-att-data-id="a.get('id')" t-att-class="a.get('type') + ' ' + domainClass">
                    <t t-esc="a.get('name')"/>
                    <t t-call="stock_kardex.report_kardex_footnote_sup" />
                </span>
            </t>
            <t t-if="a['type'] in ['line', 'total']">
                <span style="font-size: small">
                    <a t-if="a.get('action_id') and mode != 'print'" data-force-context='true' t-att-data-action-id="a.get('action_id')" class="o_account_reports_web_action">
                        <strong><t t-esc="a.get('name')"/></strong>
                    </a>
                    <t t-if="'action_id' not in a or mode == 'print'">
                        <strong><t t-esc="a.get('name')"/></strong>
                    </t>
                    <t t-call="stock_kardex.report_kardex_footnote_sup" />
                </span>
            </t>
        </td>
        <t t-foreach="a['columns']" t-as="c">
            <t t-set="column" t-value="column + 1" />
            <td t-if="not (context.get_report_obj().get_name() == 'general_ledger' and a['type'] == 'line' and column &lt; 4)" t-att-class="context.get_columns_types()[column - 1] == 'number' and  'text-right' or context.get_columns_types()[column - 1] == 'text' and  'text-left' or 'text-center'" style="white-space: nowrap;">
                <t t-if="isinstance(c, tuple)"><t t-set="style" t-value="c[1]" /><t t-set="c" t-value="c[0]" /></t>
                <span class="annotable" t-att-style="style" style="font-size: small">
                    <t t-raw="c" />
                    <t t-call="stock_kardex.report_kardex_footnote_sup" />
                </span>
            </td>
        </t>
    </tr>
</template>
<template id="report_kardex_stock_body">
    <div t-att-data-report-name="str(report.get_name())" t-att-data-context="str(context.id)" t-att-class="' '.join(['container', 'o_account_reports_page', 'o_account_reports_widgets', mode != 'print' and 'o_account_reports_no_print' or ''])">
        <h2 t-esc="report.get_title()"/>
        <h4 class='text-muted' t-esc="context.create_uid.company_id.name"/><br/>
        <div t-att-class="mode != 'print' and 'table-responsive' or ''">
            <table width='100%' t-att-class="' '.join(['o_account_reports_table', report.get_report_type() == 'date_range_extended' and 'table-striped' or ''])">
                <thead>
                    <tr>
                        <th></th>
                        <t t-set="column" t-value="0" />
                        <t t-foreach="context.get_columns_names()" t-as="column_name" style="font-size: small" class="text-center">
                            <t t-set="column" t-value="column + 1" />
                            <th t-raw="column_name" t-att-width="context.get_columns_types()[column - 1] == 'number' and '1%' or ''"/>
                        </t>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="lines" t-as="a">
                        <t t-call="stock_kardex.report_kardex_stock_line" />
                    </t>
                </tbody>
            </table>
        </div>
    </div>
</template>
<template id="assets_kardex_manager_report">
    <link rel="stylesheet" href="/web/static/src/less/fonts.less"/>
    <link rel="stylesheet" href="/web/static/src/less/variables.less"/>
    <link rel="stylesheet" href="/web/static/src/less/utils.less"/>
    <link rel="stylesheet" href="/stock_kardex/static/src/less/account_financial_report.less" />
</template>
<template id="main_kardex_general_report">
        <div class='o_account_reports_body'>
            <t t-call='stock_kardex.report_kardex_stock_body' />
        </div>
</template>
<template id="internal_kardex_layout">
    <div class="header" >
        <br/><br/>
        <div class="row">
            <div class="col-xs-4">
            </div>
            <div class="col-xs-4 text-center">
                <strong style="font-size:12px;">
                    <span t-esc="res_company.partner_id.name"/><br/>
                    <span t-esc="res_company.partner_id.street_name"/>
                    <span t-esc="res_company.partner_id.street_number"/>
                    <span t-esc="res_company.partner_id.l10n_mx_edi_colony"/>
                    <span t-esc="res_company.partner_id.zip"/>
                    <span t-esc="res_company.partner_id.city_id.name"/>,
                    <span t-esc="res_company.partner_id.state_id.name"/>,
                    <span t-esc="res_company.partner_id.country_id.name"/>
                    Tel: <span t-esc="res_company.partner_id.phone"/>
                    FAX. <span t-esc="res_company.partner_id.fax"/>
                </strong>
            </div>
            <div class="col-xs-2 col-xs-offset-2">
                <img style="max-height:150px; max-width:250px;" t-att-src="'data:image/png;base64,%s' % res_company.logo" t-if="res_company.logo"/>
            </div>
        </div>
    </div>
    <t t-raw="0" />
</template>
<!-- This template is only used when printing a financial report to a PDF output -->
<template id="main_kardex_general_report_letter">
    <t t-raw="'&lt;base href=%s&gt;' % base_url"/>
    <html>
        <head>
            <meta http-equiv="content-type" content="text/html; charset=utf-8" />
            <t t-call-assets="stock_kardex.assets_kardex_manager_report" t-js="False"/>
        </head>
        <body class="o_account_reports_body_print">
            <t t-call="stock_kardex.main_kardex_general_report"/>
        </body>
    </html>
</template>
</data>
</odoo>
